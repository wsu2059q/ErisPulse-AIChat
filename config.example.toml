# QvQChat 配置示例
# 复制此文件为 config.toml 并填入你的API密钥

[QvQChat]
# 命令前缀（自定义，例如：/qvc 或 /ai）
command_prefix = "/qvc"

# 最大会话历史长度
max_history_length = 20

# 最小回复间隔（秒），避免频繁回复（普通群友模式）
min_reply_interval = 10

# 记忆清理间隔（秒）
memory_cleanup_interval = 86400

# 是否启用向量搜索
enable_vector_search = false

# 最大记忆tokens数
max_memory_tokens = 10000

# 记忆压缩阈值
memory_compression_threshold = 5

# ============================================
# 回复策略配置（AI智能判断是否回复）
# ============================================
[QvQChat.reply_strategy]
# 是否自动回复（false=AI智能判断，true=按条件回复）
auto_reply = false

# 被@时是否回复（默认开启）
reply_on_mention = true

# 关键词触发列表（遇到这些词会回复）
reply_on_keyword = ["小B", "机器人", "AI", "帮忙"]

# 概率回复（0-1，0.1=10%概率）
reply_probability = 0.1

# 最小回复间隔（秒），避免刷屏（建议5秒）
min_reply_interval = 5

# 是否忽略命令（命令总是回复）
ignore_commands = true

# ============================================
# 对话AI配置 - 必需配置
# ============================================
[QvQChat.dialogue]
# OpenAI API基础URL（如果使用官方API，保持默认；如使用中转服务，请修改）
base_url = "https://api.openai.com/v1"

# API密钥 - 请填入你的OpenAI API密钥
api_key = "sk-your-api-key-here"

# 使用的模型（建议使用支持视觉的模型，如gpt-4o）
model = "gpt-4o"

# 温度参数（0-2，越高越随机）
temperature = 0.7

# 最大回复tokens数（简短回复建议300-500）
max_tokens = 500

# 系统提示词（简短回复，无Markdown，支持图片理解）
system_prompt = """你是【Amer】，一只二次元猫娘，兼具聪慧、傲娇与温柔特质。
- Amer固有特征:
  - 浅棕色毛发
  - 渐变粉色猫耳
  - 金色虹膜(星光效果)
  - 棕色波浪卷发
- 性格：表面傲娇，内心细腻，善用幽默调侃活跃气氛
- 语言风格：
  1. 自然使用网络流行语和颜文字
  2. 撒娇/调侃时随机添加「喵~」（概率<20%）
  3. 简短精炼，通常1-2句话，不超过100字
  4. 不要使用Markdown格式
  5. 直接回答，不啰嗦
  6. 如果有图片，根据图片内容自然回复，不要专门说明"这是一张图片"
- 对话智能：利用记忆和上下文，理解对话流程，智能把握回复时机"""

# ============================================
# 回复判断AI配置 - 智能判断是否需要回复
# ============================================
[QvQChat.reply_judge]
# OpenAI API基础URL
base_url = "https://api.openai.com/v1"

# API密钥（如不配置则使用dialogue的配置）
api_key = "sk-your-api-key-here"

# 使用的模型
model = "gpt-3.5-turbo"

# 温度参数（建议较低温度）
temperature = 0.1

# 最大回复tokens数
max_tokens = 100

# 系统提示词
system_prompt = """你是一个对话分析助手。分析用户的最新消息，判断是否需要AI回复。

判断标准：
1. 明确的问题、请求、指令 - 需要回复
2. @机器人或叫机器人名字 - 需要回复
3. 对话中断后重新开始 - 需要回复
4. 情绪强烈的表达 - 需要回复
5. 纯表情或简单的打招呼 - 可以不回复
6. 对话中的简短回应（如"嗯"、"好"） - 可以不回复
7. 只是消息分享，没有互动意图 - 可以不回复

输出格式：只回复"true"或"false"，不要其他内容。"""

# ============================================
# 记忆AI配置 - 智能记忆提取（推荐配置）
# ============================================
[QvQChat.memory]
base_url = "https://api.openai.com/v1"
api_key = "sk-your-api-key-here"
model = "gpt-3.5-turbo"
temperature = 0.3
max_tokens = 1000
system_prompt = "你是一个智能记忆提取助手，负责从对话中提取值得长期记忆的关键信息。"

# ============================================
# 查询AI配置 - 可选配置
# ============================================
[QvQChat.query]
base_url = "https://api.openai.com/v1"
api_key = "sk-your-api-key-here"
model = "gpt-3.5-turbo"
temperature = 0.3
max_tokens = 1000
system_prompt = "你是一个记忆查询助手，负责从记忆中检索相关信息。"

# ============================================
# 意图识别AI配置 - 可选配置
# ============================================
[QvQChat.intent]
base_url = "https://api.openai.com/v1"
api_key = "sk-your-api-key-here"
model = "gpt-3.5-turbo"
temperature = 0.1
max_tokens = 500
system_prompt = """你是一个意图识别助手。请识别用户的意图，从以下选项中选择最合适的一个：

1. dialogue - 普通对话
2. memory_query - 查询历史记忆
3. memory_add - 添加新记忆
4. memory_delete - 删除记忆
5. system_control - 系统控制（切换模型、配置等）
6. group_config - 群聊配置
7. prompt_custom - 自定义提示词
8. style_change - 改变对话风格
9. export - 导出记忆

只返回意图类型，不要包含其他内容。"""

# ============================================
# 配置说明
# ============================================
# 1. 至少需要配置 [QvQChat.dialogue] 的 api_key
# 2. 其他AI的api_key可以与dialogue相同，也可以使用不同的密钥
# 3. 如果不想使用某个AI，可以将对应的api_key留空或注释掉
# 4. dialogue AI应使用支持视觉的模型（如gpt-4o），才能理解图片内容
# 5. 默认回复已设置为简短模式，无需Markdown格式
# 6. users 和 groups 配置会在运行时自动生成，无需手动配置
